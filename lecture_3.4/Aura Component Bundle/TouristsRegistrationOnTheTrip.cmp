<aura:component controller="DataForRegisteOnTheTripController" implements="flexipage:availableForRecordHome,force:hasRecordId" access = "global">
    
    <aura:attribute name="recordId" type="Id"/>
    <aura:attribute name="tourists" type="Tourist__c[]"/>
    <aura:attribute name="rows" type="Map[]"/>
    <aura:attribute name="columns" type="Map[]"/>
    <aura:attribute name="numberSelectedRows" type="Integer" access="public"/>
    <aura:attribute name="checkingSeats" type="Boolean" access="public"/>
    <aura:attribute name="trip" type="List"/>
    <aura:attribute name="flights" type="Flight__c[]"/>
    <aura:attribute name="isModalOpen" type="Boolean" default="false"/>
    <aura:attribute name="selectedTourists" type="Map" default="{}"/>
    
    <aura:handler name="init" value="{!this}" action="{!c.onInit}"/>
    <lightning:navigation aura:id="navigation"/>
    
    <lightning:card title="Suitable tourists" iconName="custom:custom11">
        <lightning:datatable aura:id="linesTable"
                             data="{!v.rows}"
                             columns="{!v.columns}"
                             keyField="Id"
                             onrowaction="{!c.onRowAction}"/>
        
        <div class="slds-m-around_xx-large">
            <lightning:button variant="brand"
                              label="Add to Trip"
                              title="Add to Trip"
                              onclick="{!c.handleClick}" />
            <aura:if isTrue="{!v.isModalOpen}">
                <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                    <div class="slds-modal__container">
                        <header class="slds-modal__header">
                            <lightning:buttonIcon iconName="utility:close"
                                                  onclick="{!c.closeModel}"
                                                  alternativeText="close"
                                                  variant="bare-inverse"
                                                  class="slds-modal__close"/>
                            <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Are you sure?</h2>
                        </header>
                        <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                            <p><b>Selected Tourists will be assigned to the Trip. Are you sure?</b></p>
                        </div>
                        <footer class="slds-modal__footer">
                            <lightning:button variant="neutral"
                                              label="Cancel"
                                              title="Cancel"
                                              onclick="{!c.closeModel}"/>
                            <lightning:button variant="brand"
                                              label="Yes"
                                              title="Yes"
                                              onclick="{!c.addOnTrip}"/>
                        </footer>
                    </div>
                </section>
                <div class="slds-backdrop slds-backdrop_open"></div>
            </aura:if>
        </div>
        
    </lightning:card>
</aura:component>